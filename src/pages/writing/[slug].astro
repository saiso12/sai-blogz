---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
  const posts = await getCollection('writing');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();

const formattedDate = post.data.date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<BaseLayout title={`${post.data.title} â€” Sai Soundararajan`} description={post.data.title}>
  <div class="container">
    <a href="/" class="back-link">
      <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back
    </a>

    <article class="article">
      <header class="article-header">
        <div class="article-meta">
          <span>{formattedDate}</span>
          <span class="article-tag">{post.data.tag}</span>
        </div>
        <h1 class="article-title">{post.data.title}</h1>
      </header>

      <div class="article-content">
        <Content />
      </div>
    </article>

    <Footer />
  </div>
</BaseLayout>
